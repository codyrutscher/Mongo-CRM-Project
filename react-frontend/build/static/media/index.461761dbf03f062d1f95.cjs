"use strict";var React=require("react"),chart_js=require("chart.js");const defaultDatasetIdKey="label";function reforwardRef(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function setOptions(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function setLabels(t,e){t.labels=e}function setDatasets(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";const a=[];t.datasets=e.map(e=>{const n=t.datasets.find(t=>t[r]===e[r]);return n&&e.data&&!a.includes(n)?(a.push(n),Object.assign(n,e),n):{...e}})}function cloneData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";const r={labels:[],datasets:[]};return setLabels(r,t.labels),setDatasets(r,t.datasets,e),r}function getDatasetAtEvent(t,e){return t.getElementsAtEventForMode(e.nativeEvent,"dataset",{intersect:!0},!1)}function getElementAtEvent(t,e){return t.getElementsAtEventForMode(e.nativeEvent,"nearest",{intersect:!0},!1)}function getElementsAtEvent(t,e){return t.getElementsAtEventForMode(e.nativeEvent,"index",{intersect:!0},!1)}function ChartComponent(t,e){const{height:r=150,width:a=300,redraw:n=!1,datasetIdKey:s,type:c,data:o,options:l,plugins:u=[],fallbackContent:i,updateMode:d,...f}=t,h=React.useRef(null),p=React.useRef(null),E=()=>{h.current&&(p.current=new chart_js.Chart(h.current,{type:c,data:cloneData(o,s),options:l&&{...l},plugins:u}),reforwardRef(e,p.current))},g=()=>{reforwardRef(e,null),p.current&&(p.current.destroy(),p.current=null)};return React.useEffect(()=>{!n&&p.current&&l&&setOptions(p.current,l)},[n,l]),React.useEffect(()=>{!n&&p.current&&setLabels(p.current.config.data,o.labels)},[n,o.labels]),React.useEffect(()=>{!n&&p.current&&o.datasets&&setDatasets(p.current.config.data,o.datasets,s)},[n,o.datasets]),React.useEffect(()=>{p.current&&(n?(g(),setTimeout(E)):p.current.update(d))},[n,l,o.labels,o.datasets,d]),React.useEffect(()=>{p.current&&(g(),setTimeout(E))},[c]),React.useEffect(()=>(E(),()=>g()),[]),React.createElement("canvas",{ref:h,role:"img",height:r,width:a,...f},i)}const Chart=React.forwardRef(ChartComponent);function createTypedChart(t,e){return chart_js.Chart.register(e),React.forwardRef((e,r)=>React.createElement(Chart,{...e,ref:r,type:t}))}const Line=createTypedChart("line",chart_js.LineController),Bar=createTypedChart("bar",chart_js.BarController),Radar=createTypedChart("radar",chart_js.RadarController),Doughnut=createTypedChart("doughnut",chart_js.DoughnutController),PolarArea=createTypedChart("polarArea",chart_js.PolarAreaController),Bubble=createTypedChart("bubble",chart_js.BubbleController),Pie=createTypedChart("pie",chart_js.PieController),Scatter=createTypedChart("scatter",chart_js.ScatterController);exports.Bar=Bar,exports.Bubble=Bubble,exports.Chart=Chart,exports.Doughnut=Doughnut,exports.Line=Line,exports.Pie=Pie,exports.PolarArea=PolarArea,exports.Radar=Radar,exports.Scatter=Scatter,exports.getDatasetAtEvent=getDatasetAtEvent,exports.getElementAtEvent=getElementAtEvent,exports.getElementsAtEvent=getElementsAtEvent;